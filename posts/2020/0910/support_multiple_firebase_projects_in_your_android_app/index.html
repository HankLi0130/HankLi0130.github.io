<!doctype html><html lang=en-ca><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Support multiple Firebase projects in your Android app</title><style>html body{font-family:roboto,sans-serif;background-color:#fff}:root{--accent:#ff9900;--border-width:0}</style><link rel=stylesheet href=https://hankli0130.github.io/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/swift.min.js></script><script>hljs.initHighlightingOnLoad()</script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script>$(document).on('click',function(){$('.collapse').collapse('hide')})</script><meta name=generator content="Hugo 0.84.2"><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></head><body><nav class="navbar navbar-default navbar-fixed-top"><div class=container><div class=navbar-header><a class="navbar-brand visible-xs" href=#>Support multiple Firebase projects in your Android app</a>
<button class=navbar-toggle data-target=.navbar-collapse data-toggle=collapse>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li></ul><ul class="nav navbar-nav navbar-right"><li class=navbar-icon><a href=https://www.youtube.com/channel/UCVYje6c5eOPJwu2-1tfQiEw><i class="fab fa-youtube"></i></a></li><li class=navbar-icon><a href=https://github.com/HankLi0130><i class="fab fa-github"></i></a></li><li class=navbar-icon><a href=mailto:hankli0130@gmail.com><i class="fas fa-envelope"></i></a></li></ul></div></div></nav><main><div><h2>Support multiple Firebase projects in your Android app</h2><h5></h5><a href=https://hankli0130.github.io/tags/android><kbd class=item-tag>Android</kbd></a>
<a href=https://hankli0130.github.io/tags/firebase><kbd class=item-tag>Firebase</kbd></a></div><div align=start class=content><p>Have you ever thought about create multiple environments in Android app? I&rsquo;d got this question since I created my first Firebase project and finally I tried and found the answer these days. This artical is sharing how to make different variants to connect to different Firebase projects and switch them easily in Android projects.</p><h1 id=lets-get-it-started>Let&rsquo;s get it started</h1><h3 id=step-1-name-variants>Step 1: Name variants</h3><p>Firstable, give names for your variants. For instance, I have two variants and named them as <code>development, release</code>.</p><h3 id=step-2-create-keystores-for-each-variants>Step 2: Create keystores for each variants</h3><p>I created two keystores for my development and release variants because Firebase need SHA-1 certification to enable the functionalities I need.</p><p>It&rsquo;s really easy to create a keystore, Just open Android Studio and follow steps below to create keys.</p><ul><li>Choose <code>Build</code> and <code>Generate Signed Bundle / APK</code>.</li></ul><p><img src=/posts/2020/0910/create_key_step_1.png alt="create key step 1"></p><ul><li><p>Choose one of these two options, in my case, I selected the Android App Bundle.
<img src=/posts/2020/0910/create_key_step_2.png alt="create key step 2"></p></li><li><p>Click <code>Create New...</code> button.
<img src=/posts/2020/0910/create_key_step_3.png alt="create key step 3"></p></li><li><p>Type the informations and then press <code>OK</code> button.
<img src=/posts/2020/0910/create_key_step_4.png alt="create key step 4"></p></li></ul><p>When you created the keys, close the window because we don&rsquo;t need create Bundle or APK.</p><h3 id=step-3-configure-build-types>Step 3: Configure build types</h3><p>Let&rsquo;s move to <code>build.gradle</code>, add <code>signingConfigs</code> block and <code>buildTypes</code> block like below and change to your settings.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gradle data-lang=gradle>android <span style=color:#f92672>{</span>
    signingConfigs <span style=color:#f92672>{</span>
        development <span style=color:#f92672>{</span>
            storeFile <span style=color:#a6e22e>file</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#39;/Users/hank/development.keystore&#39;</span><span style=color:#f92672>)</span>
            storePassword <span style=color:#e6db74>&#39;password&#39;</span>
            keyAlias <span style=color:#e6db74>&#39;androiddevelopmentkey&#39;</span>
            keyPassword <span style=color:#e6db74>&#39;password&#39;</span>
        <span style=color:#f92672>}</span>
        release <span style=color:#f92672>{</span>
            storeFile <span style=color:#a6e22e>file</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#39;/Users/hank/release.keystore&#39;</span><span style=color:#f92672>)</span>
            storePassword <span style=color:#e6db74>&#39;password&#39;</span>
            keyAlias <span style=color:#e6db74>&#39;androidreleasekey&#39;</span>
            keyPassword <span style=color:#e6db74>&#39;password&#39;</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
    <span style=color:#f92672>...</span>

    defaultConfig <span style=color:#f92672>{</span>
        applicationId <span style=color:#e6db74>&#34;dev.hankli.iamstar&#34;</span>
        <span style=color:#f92672>...</span>
    <span style=color:#f92672>}</span>
    buildTypes <span style=color:#f92672>{</span>
        development <span style=color:#f92672>{</span>
            debuggable <span style=color:#66d9ef>true</span>
            applicationIdSuffix <span style=color:#e6db74>&#34;.dev&#34;</span>
            versionNameSuffix <span style=color:#e6db74>&#34;-dev&#34;</span>
            signingConfig signingConfigs<span style=color:#f92672>.</span><span style=color:#a6e22e>development</span>
        <span style=color:#f92672>}</span>
        release <span style=color:#f92672>{</span>
            minifyEnabled <span style=color:#66d9ef>true</span>
            proguardFiles <span style=color:#a6e22e>getDefaultProguardFile</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#39;proguard-android-optimize.txt&#39;</span><span style=color:#f92672>),</span> <span style=color:#e6db74>&#39;proguard-rules.pro&#39;</span>
            signingConfig signingConfigs<span style=color:#f92672>.</span><span style=color:#a6e22e>release</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h3 id=step-4-create-firebase-projects>Step 4: Create Firebase projects</h3><ul><li>Click <code>signingReport</code> task and the SHA-1 will show up on the window.</li></ul><p><img src=/posts/2020/0910/create_firebase_step_1.png alt="create firebase step 1"></p><ul><li>Move to Firebase Console, create projects and add Firebase to your Android app.
<strong>Note</strong> Here the Android package name must be typed like <code>applicationId + applicationIdSuffix</code>, otherwise it won&rsquo;t work. Here I typed <code>dev.hankli.iamstar.dev</code> for my development variant.</li></ul><p><img src=/posts/2020/0910/create_firebase_step_2.png alt="create firebase step 2"></p><ul><li>Download <code>google-services.json</code> file from Firebase console and then back to Android Studio to create specific folder and move the file to your project.</li></ul><p><img src=/posts/2020/0910/create_firebase_step_3.png alt="create firebase step 3"></p><ul><li>Right now, you&rsquo;re finished the development one, next do the same steps with the release one.</li></ul><h3 id=step-5-switch-the-variants>Step 5: Switch the variants</h3><p>Congratulations! You&rsquo;re done all the settings, just switch your variants at <code>Build Variants</code> window, which is on left-bottom side of Android Studio.</p><p><img src=/posts/2020/0910/switch_variants.png alt="switch variants"></p><h3 id=optional-setting-provider>Optional: Setting provider</h3><p>If you&rsquo;re using provider in AndroidManifest.xml, rename the package name to <code>${applicationId}.provider</code> to <code>android:authorities</code> property.</p><p><img src=/posts/2020/0910/set_provider.png alt="set provider"></p><p>Thanks for reading. Please feel welcome to let me know if you have any questions.</p></div></main><footer><p class="copyright text-muted">Copyright Â© 2021 Hank Dev. All rights reserved.</p></footer></body></html>